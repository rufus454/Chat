<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Conversa con tus amigos</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="flex flex-col items-center justify-center w-screen min-h-screen bg-gray-100 text-gray-800 p-10">
    <h1 class="mb-3 font-bold text-xl" id="title"></h1>
    <!-- Component Start -->
    <div class="flex flex-col flex-grow w-full max-w-xl bg-white shadow-xl rounded-lg overflow-hidden">
        <div class="flex flex-col flex-grow h-0 p-4 overflow-auto" id="message-list">
        </div>

        <div class="bg-gray-300 p-4 flex items-center justify-between border-t border-gray-200">
            <input id="message-input" class="flex items-center h-10 w-full rounded px-3 text-sm" type="text"
                placeholder="Envía tu mensaje" />
            <button id="send-message" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Enviar
            </button>
        </div>

    </div>

    <button type="button" class="absolute top-3 right-3 bg-red-300 rounded-full w-32" onclick="logout()">
        Cerrar<br>Sesión
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="socket.js"></script>

    <script type="text/javascript">
        window.addEventListener('DOMContentLoaded', function () {
            init();
        });

        const init = () => {
            const token = localStorage.getItem('token');
            if (!token) {
                localStorage.removeItem('token');
                alert('No tienes permiso para estar aquí');
                window.location.href = 'index.html';
                return;
            }
            const username = localStorage.getItem('username');
            document.getElementById('title').innerText = `Bienvenido ${username}`;
        }

        const logout = () => {
            localStorage.removeItem('token');
            window.location.href = 'index.html';
        }
    </script>

    <script>
        document.getElementById('send-message').addEventListener('click', function () {
            location.reload();
        });
    </script>

</body>

</html>